<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">

    <link rel="icon" href="/logo.svg">
    <link rel="apple-touch-icon" href="/logo.png">


    <title>Antifaschistische Aktion</title>

    <link href="/bootstrap.min.css" rel="stylesheet">
    <link href="/main.css" rel="stylesheet">

  </head>

  <body>

    <div class="background-logo">
    </div>

    <main role="main" class="container">
      <h1 class="mt-5">Farbeinstellungen</h1>
      
      <div class="row mt-5 form-group">
        <div class="col col-md-12">
          <h3>Helligkeit</h3>
          <div class="slidecontainer">
          <input class="slider" type="range" id="basic_brightness" min="0" max="255" value="{{brightness}}" oninput="basic_changed()">
          </div>
          <div class="custom-control custom-switch">
            <input type="checkbox" class="custom-control-input" id="basic_normalized" onchange="basic_changed();" {% if normalized %}checked{% endif %}>
            <label class="custom-control-label" for="basic_normalized">Normalisieren</label>
          </div>
        </div>
      </div>

      <div class="row mt-5 form-group">
        <div class="col col-md-6">
          <input class="form-control btn-secondary" type="color" id="anim_single_color" value="#ffffff" oninput="anim_single_color();">
          <!--<label for="single_color">Eine Farbe</label>--> 
        </div>
        <div class="col col-md-6">
          <!--<label for="rainbow_full_start">Rainbow Full:</label><br>-->
          <button class="btn btn-primary btn-block" type="button" onclick="submit('/animation/off', {});">Ausschalten</button>
        </div>
      </div>
    <div class="row mt-5">
        <div class="col col-md-6">
            <button class="btn btn-primary btn-block" type="button" onclick="submit('/animation/rainbow');">Regenbogen (Einfarbig)</button>
        </div>
        <div class="col col-md-6">
            <button class="btn btn-primary btn-block" type="button" onclick="submit('/animation/rainbow_cycle');">Regenbogen (Kreislauf)</button>
        </div>
    </div>
    <div class="row mt-5">
        <div class="col col-md-6">
            <button class="btn btn-primary btn-block" type="button" onclick="submit('/animation/rainbow_bars');">Regenbogen (Horizontal)</button>
        </div>
        <div class="col col-md-6">
            <button class="btn btn-primary btn-block" type="button" onclick="submit('/animation/audio_visual');">Audio Visualisierung</button>
        </div>
    </div>
      <div class="row mt-5">
        <div class="col col-md-4">
          <input class="form-control btn-secondary" type="color" id="big_flag_color" value="#ff0000" oninput="anim_parts_color();">
          <label for="big_flag_color">Gro√üe Flagge</label>
        </div>
        <div class="col col-md-4">
          <input class="form-control btn-secondary" type="color" id="small_flag_color" value="#ff0000" oninput="anim_parts_color();">
          <label for="small_flag_color">Kleine Flagge</label>
        </div>
        <div class="col col-md-4">
          <input class="form-control btn-secondary" type="color" id="ring_color" value="#ff0000" oninput="anim_parts_color();">
          <label for="ring_color">Ring</label>
        </div>

      </main>

    <script src="/jquery.min.js"></script>


    <script>

      function submit(path, params, method="POST") {
          var http = new XMLHttpRequest();
          http.open(method, path, true);
          http.setRequestHeader("Content-type","application/x-www-form-urlencoded");
          var params_str = ""; // probably use document.getElementById(...).value
          for (const key in params) {
              params_str += key + "=";
              params_str += params[key] + "&";
          }
          params_str = params_str.substring(0, params_str.length - 1);
          console.log(params_str);
          http.send(params_str);
          /*http.onload = function() {
              alert(http.responseText);
          }*/
      }

      function basic_changed(){

          var brightness = document.getElementById("basic_brightness").value;
          var normalized = document.getElementById("basic_normalized").checked;

          $(".background-logo").css("opacity", brightness / 1000);

          submit("/set_basic", {
              "brightness": brightness,
              "normalized": normalized
          })

      }

      function anim_single_color(){
          submit("/animation/single_color", {
              "color": document.getElementById("anim_single_color").value
          })
      }

      function anim_parts_color(){
          submit("/animation/parts_color", {
              "big_flag_color": document.getElementById("big_flag_color").value,
              "small_flag_color": document.getElementById("small_flag_color").value,
              "ring_color": document.getElementById("ring_color").value
          })
      }

  </script>

  </body>
</html>
